schema: '2.0'
stages:
  raw_dataset_creation:
    cmd: python3 ./src/data/load_data.py --config=params.yaml
    deps:
    - path: ./data/external/Churn_Prediction.csv
      md5: 7321aa9a1e24a9e139f42124f736b415
      size: 674857
    - path: ./src/data/load_data.py
      md5: 4a43bd22a142c77f117b6dde8e3451fc
      size: 1314
    outs:
    - path: ./data/raw/Churn_Prediction.csv
      md5: d9534fcf204e37ae58a7d7313ce4659c
      size: 469203
  eda:
    cmd: python3 ./src/data/eda.py --config=params.yaml
    deps:
    - path: ./data/external/Churn_Prediction.csv
      md5: 7321aa9a1e24a9e139f42124f736b415
      size: 674857
    - path: ./src/data/eda.py
      md5: 2b0d30a5ed69fd4f7c136f059640f10c
      size: 1538
    outs:
    - path: ./reports/templates/eda_report.html
      hash: md5
      md5: 63bdd9605844f0716996fc1563271157
      size: 2892009
  preprocess:
    cmd: python3 ./src/data/preprocess.py --config=params.yaml
    deps:
    - path: ./data/raw/Churn_Prediction.csv
      md5: d9534fcf204e37ae58a7d7313ce4659c
      size: 469203
    - path: ./src/data/preprocess.py
      md5: 8eb8bd0424341b8cb118711a408c5313
      size: 1533
    outs:
    - path: ./data/processed/processed_data.csv
      md5: 487733dd81bed7f60072fc7a803fbf8f
      size: 400114
  split_data:
    cmd: python3 ./src/data/split_data.py --config=params.yaml
    deps:
    - path: ./data/processed/processed_data.csv
      md5: 487733dd81bed7f60072fc7a803fbf8f
      size: 400114
    - path: ./src/data/split_data.py
      md5: f6191b05190b1b8e5bf4e4f6f96f679f
      size: 1451
    outs:
    - path: ./data/processed/churn_test.csv
      md5: 0fc6853dea827712941c41c40d564d1f
      size: 80121
    - path: ./data/processed/churn_train.csv
      md5: c900296636fd3eb243a0d938c80750d7
      size: 320132
  optimize:
    cmd: python3 ./src/models/optimization.py --config=params.yaml
    deps:
    - path: ./data/processed/churn_test.csv
      md5: 0fc6853dea827712941c41c40d564d1f
      size: 80121
    - path: ./data/processed/churn_train.csv
      md5: c900296636fd3eb243a0d938c80750d7
      size: 320132
    - path: ./src/models/optimization.py
      hash: md5
      md5: 6b180232e13bf4d1bb44a8b947da8955
      size: 3157
  model_train:
    cmd: python3 ./src/models/train_model.py --config=params.yaml
    deps:
    - path: ./src/models/train_model.py
      hash: md5
      md5: b07a71a2d8c566096667d966e889561a
      size: 3929
    params:
      params.yaml:
        random_forest.max_depth: 20
        random_forest.n_estimators: 8
  log_production_model:
    cmd: python3 ./src/models/model_selection.py --config=params.yaml
    deps:
    - path: ./src/models/model_selection.py
      hash: md5
      md5: ddd255e12d28990d17e0a481f42bfb77
      size: 2076
    params:
      params.yaml:
        random_forest.max_depth: 20
        random_forest.n_estimators: 8
    outs:
    - path: ./models/model.joblib
      hash: md5
      md5: d013179c0181d04b56b70b2f847af77d
      size: 464688
  monitor_model:
    cmd: python3 ./src/models/model_monitor.py --config=params.yaml
    deps:
    - path: ./data/raw/train_new.csv
      hash: md5
      md5: 8171271e66fbf81e40ebb9718d58ed55
      size: 47092
    - path: ./src/models/model_monitor.py
      hash: md5
      md5: 9622f8fd2a95f3eab5449c77ad04e496
      size: 2251
    outs:
    - path: ./reports/templates/data_and_target_drift_dashboard.html
      hash: md5
      md5: 9d8359f609cabb71b33acfea337de1f1
      size: 3023120
